<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex,nofollow">

  <!-- same meta tags as your other admin pages -->
  <meta name="api-base" content="https://red-cake-77d5.evazquez-3e0.workers.dev/">
  <meta name="google-client-id" content="690302076971-cmclpgcqko4lhuaetbeacu00ptl9jc4m.apps.googleusercontent.com">

  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <link rel="icon" type="image/png" sizes="32x32" href="../icons/icon-32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../icons/icon-192.png">
  <link rel="apple-touch-icon" href="../icons/icon-192.png">

  <title>Student View</title>

  <link rel="stylesheet" href="./nav.css">
  <script src="./nav.js" defer></script>

  <script>
    (function(){
      try{
        var key='ss_theme_v1';
        var t=localStorage.getItem(key);
        if(!t){
          t=(window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches)?'light':'dark';
        }
        document.documentElement.dataset.theme=t;
      }catch(e){}
    })();
  </script>

  <style>
    :root{
      color-scheme: dark;
      --fg:#e5e7eb; --muted:#9ca3af;
      --page-bg: radial-gradient(circle at top, #020617, #000);
      --login-bg: linear-gradient(145deg, rgba(15,23,42,0.98), rgba(15,23,42,0.94));
      --card-bg: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(15,23,42,0.92));
      --pill-bg: rgba(15,23,42,0.85);
      --control-bg: rgba(2,6,23,0.35);
      --card-border:#1f2937;
      --border-strong: rgba(31,41,55,0.9);
    }
    :root[data-theme="light"]{
      color-scheme: light;
      --fg:#0f172a; --muted:#334155;
      --page-bg: radial-gradient(circle at top, #eef2ff, #ffffff);
      --login-bg: linear-gradient(145deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));
      --card-bg: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));
      --pill-bg: rgba(255,255,255,0.85);
      --control-bg: rgba(241,245,249,0.8);
      --card-border: rgba(100,116,139,0.35);
      --border-strong: rgba(100,116,139,0.35);
    }
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--page-bg); color: var(--fg); }

    .wrap{ max-width: 980px; margin: 0 auto; padding: 16px; }
    .card{
      border:1px solid var(--card-border);
      background: var(--card-bg);
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.25);
      backdrop-filter: blur(10px);
    }
    #loginCard{ max-width: 520px; margin: 10vh auto 0; background: var(--login-bg); }
    .muted{ color: var(--muted); }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    .topbar{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .input{
      width: min(540px, 100%);
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border-strong);
      background: var(--control-bg);
      color: var(--fg);
      outline: none;
      font-weight: 700;
    }
    .suggest{
      position: relative;
      width: min(540px, 100%);
    }
    .menu{
      position:absolute;
      top: calc(100% + 6px);
      left:0; right:0;
      border-radius: 14px;
      border: 1px solid var(--card-border);
      background: var(--pill-bg);
      overflow: hidden;
      z-index: 50;
      box-shadow: 0 18px 60px rgba(0,0,0,0.25);
      display:none;
    }
    .menu button{
      width:100%;
      text-align:left;
      padding: 10px 12px;
      border:0;
      background: transparent;
      color: var(--fg);
      cursor:pointer;
    }
    .menu button:hover{ background: rgba(99,102,241,0.12); }
    .layout{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top: 12px; }
    @media (max-width: 900px){ .layout{ grid-template-columns: 1fr; } }
    .row{ display:flex; justify-content:space-between; gap:10px; padding: 8px 0;
      border-bottom: 1px dashed rgba(100,116,139,0.25); }
    .row:last-child{ border-bottom:none; }
  </style>
</head>

<body>
  <div class="wrap">

    <section id="loginCard" class="card">
      <h2 style="margin:0 0 6px;">Admin sign-in</h2>
      <div class="muted">Use your staff account.</div>
      <div style="margin-top:12px;" id="g_id_signin"></div>
      <pre id="loginOut" class="muted" style="margin:10px 0 0; white-space:pre-wrap;">Loading…</pre>
    </section>

    <section id="app" style="display:none;">
      <div class="topbar">
        <div class="suggest">
          <input id="q" class="input" placeholder="Search student (name, OSIS, email)…" autocomplete="off" />
          <div id="menu" class="menu"></div>
        </div>
        <div class="muted mono" id="picked">No student selected</div>
      </div>

      <div class="layout">
        <section class="card">
          <h3 style="margin:0 0 8px;">Current Location</h3>
          <div class="row"><div class="muted">Zone</div><div class="mono" id="locZone">—</div></div>
          <div class="row"><div class="muted">Location</div><div class="mono" id="locLabel">—</div></div>
          <div class="row"><div class="muted">Updated</div><div class="mono" id="locUpdated">—</div></div>
        </section>

        <section class="card">
          <h3 style="margin:0 0 8px;">This Period</h3>
          <div class="row"><div class="muted">Schedule</div><div class="mono" id="sched">—</div></div>
          <div class="row"><div class="muted">Attendance</div><div class="mono" id="att">—</div></div>
          <div class="row"><div class="muted">Out / In</div><div class="mono" id="oi">—</div></div>
        </section>
      </div>

      <div class="muted mono" style="margin-top:10px;" id="meta">—</div>
    </section>

  </div>

  <script src="./student_view.js"></script>
</body>
</html>
